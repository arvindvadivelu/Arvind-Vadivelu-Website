<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #050505; color: #fff; font-family: sans-serif; }
        .input-field { width: 100%; background: #0F0F0F; border: 1px solid #1F1F1F; padding: 0.75rem; border-radius: 0.5rem; color: white; margin-top: 0.5rem; outline: none; }
        .input-field:focus { border-color: #FFD02F; }
    </style>
</head>
<body class="p-8 pb-32">

    <div class="max-w-4xl mx-auto">
        <div class="flex items-center gap-3 mb-8">
            <span class="w-3 h-3 rounded-full bg-[#FFD02F]"></span>
            <h1 class="text-3xl font-bold">Content Generator</h1>
        </div>

        <p class="text-gray-400 mb-8">Write your blog naturally. This tool will auto-format it, calculate the read time, and generate the exact JavaScript object to paste into <code>articles.js</code>.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
                <label class="text-sm text-gray-400 font-bold uppercase tracking-widest">Article Title</label>
                <input type="text" id="title" class="input-field" placeholder="e.g. Scaling Node.js">
            </div>
            <div>
                <label class="text-sm text-gray-400 font-bold uppercase tracking-widest">Category</label>
                <select id="category" class="input-field">
                    <option value="Backend">Backend</option>
                    <option value="System Design">System Design</option>
                    <option value="Database">Database</option>
                    <option value="DevOps">DevOps</option>
                </select>
            </div>
            <div class="md:col-span-2">
                <label class="text-sm text-gray-400 font-bold uppercase tracking-widest">Short Description</label>
                <input type="text" id="desc" class="input-field" placeholder="A 2-line summary for the card...">
            </div>
            <div class="md:col-span-2">
                <label class="text-sm text-gray-400 font-bold uppercase tracking-widest">Cover Image</label>
                <p class="text-xs text-gray-500 mt-1">Paste a web URL (https://...) OR a local path. To use a local image, put it in an "images" folder and type <code>./images/your-pic.jpg</code></p>
                <input type="text" id="image" class="input-field" placeholder="./images/my-cover.jpg">
            </div>
            <div class="md:col-span-2">
                <label class="text-sm text-gray-400 font-bold uppercase tracking-widest mb-2 block">Content (Markdown Supported)</label>
                <p class="text-xs text-gray-500 mb-2">Use ## for headings, **bold** for bold, and ```java for code blocks.</p>
                <textarea id="content" rows="12" class="input-field font-mono text-sm" placeholder="Write your blog post here..."></textarea>
            </div>
        </div>

        <button onclick="generateCode()" class="w-full bg-[#FFD02F] text-black font-bold py-4 rounded-xl hover:bg-yellow-500 transition-colors mb-8">
            Generate Code Snippet
        </button>

        <div id="output-area" class="hidden">
            <h2 class="text-xl font-bold mb-4 text-green-400">âœ… Success! Copy & Paste this at the top of the array in articles.js:</h2>
            <div class="relative">
                <button onclick="copyCode(event)" class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg text-sm font-bold transition-colors">Copy Code</button>
                <pre><code id="result-code" class="block bg-[#0F0F0F] border border-[#1F1F1F] p-6 rounded-xl overflow-x-auto text-sm text-gray-300 font-mono whitespace-pre-wrap"></code></pre>
            </div>
        </div>
    </div>

    <script>
        // Custom Lightweight Markdown Parser
        function parseMarkdownToHTML(md) {
            let html = md;
            
            // Code Blocks (```java code ```)
            html = html.replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre><code class="language-$1">$2</code></pre>');
            // Inline Code (`code`)
            html = html.replace(/\`([^`]+)\`/g, '<code>$1</code>');
            // Headings (## Heading)
            html = html.replace(/^### (.*$)/gim, '<h3>$1</h3>');
            html = html.replace(/^## (.*$)/gim, '<h3>$1</h3>');
            // Bold
            html = html.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
            
            // Paragraphs (Split by double line breaks)
            html = html.split('\n\n').map(p => {
                const trimmed = p.trim();
                if (trimmed === '') return '';
                if (trimmed.startsWith('<pre') || trimmed.startsWith('<h3')) return trimmed;
                return '<p class="text-xl font-light text-gray-300 mb-8 leading-relaxed">' + trimmed.replace(/\n/g, '<br>') + '</p>';
            }).filter(p => p !== '').join('\n');

            return html;
        }

        function generateCode() {
            const title = document.getElementById('title').value;
            const category = document.getElementById('category').value;
            const desc = document.getElementById('desc').value;
            const image = document.getElementById('image').value || "[https://images.unsplash.com/photo-1558494949-ef010cbdcc31?q=80&w=2000&auto=format&fit=crop](https://images.unsplash.com/photo-1558494949-ef010cbdcc31?q=80&w=2000&auto=format&fit=crop)";
            const rawContent = document.getElementById('content').value;

            // Auto-Generate Date
            const dateOpts = { year: 'numeric', month: 'short', day: 'numeric' };
            const today = new Date().toLocaleDateString('en-US', dateOpts);

            // Auto-Calculate Read Time
            const wordCount = rawContent.split(' ').length;
            const readTime = Math.max(1, Math.ceil(wordCount / 200)) + " min read";

            // Parse Content
            let parsedHTML = parseMarkdownToHTML(rawContent);

            // CRITICAL FIX: Escape backticks and dollar signs so it doesn't break JS template literals!
            const safeHTML = parsedHTML.replace(/`/g, '\\`').replace(/\$/g, '\\$');

            // Format Output (Valid JS Object format)
            const finalCode = `{
    id: ${Date.now()},
    title: "${title.replace(/"/g, '\\"')}",
    category: "${category}",
    date: "${today}",
    readTime: "${readTime}",
    desc: "${desc.replace(/"/g, '\\"')}",
    image: "${image}",
    content: \`
${safeHTML}
    \`
},`;

            document.getElementById('result-code').textContent = finalCode;
            document.getElementById('output-area').classList.remove('hidden');
            
            // Scroll to the generated code smoothly
            setTimeout(() => {
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 100);
        }

        function copyCode(event) {
            const code = document.getElementById('result-code').textContent;
            navigator.clipboard.writeText(code);
            
            // Visual feedback on the button
            const btn = event.target;
            const originalText = btn.innerText;
            btn.innerText = "Copied!";
            btn.classList.add("bg-green-500", "text-black");
            btn.classList.remove("bg-white/10", "hover:bg-white/20");
            
            setTimeout(() => {
                btn.innerText = originalText;
                btn.classList.remove("bg-green-500", "text-black");
                btn.classList.add("bg-white/10", "hover:bg-white/20");
            }, 2000);
        }
    </script>
</body>
</html>